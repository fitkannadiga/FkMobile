{"version":3,"sources":["webpack:///./src/app/pages/profile/profile.module.ts","webpack:///./src/app/pages/profile/profile.page.html","webpack:///./src/app/pages/profile/profile.page.scss","webpack:///./src/app/pages/profile/profile.page.ts"],"names":[],"mappings":"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","file":"pages-profile-profile-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ProfilePage } from './profile.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ProfilePage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ProfilePage]\n})\nexport class ProfilePageModule {}\n","module.exports = \"<ion-header>\\n    <ion-toolbar>\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-back-button></ion-back-button>\\n        </ion-buttons>\\n        <ion-title>Profile Page</ion-title>\\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n    <input id=\\\"file-uploader\\\" type=\\\"file\\\" (change)=\\\"uploadFile($event)\\\" name=\\\"Upload Image\\\" hidden/>\\n    <div id=\\\"image-upload-wrapper\\\">\\n        <img id=\\\"user-img\\\" [src]=\\\"imgPath\\\" (click)=\\\"triggerUpload()\\\" onError=\\\"src = 'assets/default.png'\\\" />\\n        <img id=\\\"edit-icon\\\" src=\\\"assets/icon/edit-image.png\\\" (click)=\\\"triggerUpload()\\\" />\\n    </div>\\n    <form id=\\\"user-profile-form\\\" #userProfileForm=\\\"ngForm\\\" (ngSubmit)=\\\"validateForm(userProfileForm)\\\" autocomplete=\\\"off\\\">\\n        <ion-item>\\n            <ion-label position=\\\"floating\\\">Full Name<span class=\\\"danger\\\">*</span></ion-label>\\n            <ion-input type=\\\"text\\\" name=\\\"fullname\\\" required [(ngModel)]=\\\"profile.fullname\\\"></ion-input>\\n        </ion-item>\\n        <ion-item>\\n            <ion-label position=\\\"floating\\\">Email<span class=\\\"danger\\\">*</span></ion-label>\\n            <ion-input type=\\\"text\\\" name=\\\"email\\\" required [(ngModel)]=\\\"profile.email\\\" disabled=\\\"disabled\\\"></ion-input>\\n        </ion-item>\\n        <!--<ion-item>\\n            <ion-label position=\\\"floating\\\">Age<span class=\\\"danger\\\">*</span></ion-label>\\n            <ion-input type=\\\"number\\\" name=\\\"age\\\" required [(ngModel)]=\\\"profile.age\\\"></ion-input>\\n        </ion-item>-->\\n        <ion-item>\\n            <ion-label position=\\\"floating\\\">Date Of Birth<span class=\\\"danger\\\">*</span></ion-label>\\n            <ion-datetime display-format=\\\"DD/MM/YYYY\\\" picker-format=\\\"DD MMMM YYYY\\\" name=\\\"dob\\\" required [(ngModel)]=\\\"profile.dob\\\"></ion-datetime>\\n            <!-- <ion-datetime displayFormat=\\\"MMM DD, YYYY\\\" name=\\\"dob\\\" required [(ngModel)]=\\\"profile.dob\\\"></ion-datetime> -->\\n        </ion-item>\\n        <ion-item>\\n            <ion-label position=\\\"floating\\\">Gender<span class=\\\"danger\\\">*</span></ion-label>\\n            <ion-select name=\\\"gender\\\" required [(ngModel)]=\\\"profile.gender\\\">\\n                <ion-select-option value=\\\"female\\\">Female</ion-select-option>\\n                <ion-select-option value=\\\"male\\\">Male</ion-select-option>\\n            </ion-select>\\n        </ion-item>\\n        <ion-item>\\n            <ion-label position=\\\"floating\\\">Weight[kg]</ion-label>\\n            <ion-input type=\\\"number\\\" name=\\\"weight\\\" [(ngModel)]=\\\"profile.weight\\\"></ion-input>\\n        </ion-item>\\n        <ion-item>\\n            <ion-label position=\\\"floating\\\">Height[cms]</ion-label>\\n            <ion-input type=\\\"number\\\" name=\\\"height\\\" [(ngModel)]=\\\"profile.height\\\"></ion-input>\\n        </ion-item>\\n        <ion-button class=\\\"fk-marginTop-25\\\" id=\\\"update-profile-btn\\\" color=\\\"secondary\\\" expand=\\\"full\\\" size=\\\"large\\\" type=\\\"submit\\\">Update Profile</ion-button>\\n    </form>\\n</ion-content>\"","module.exports = \"ion-item {\\n  padding-left: 0px !important; }\\n\\n#image-upload-wrapper {\\n  position: relative;\\n  width: 150px;\\n  height: 150px;\\n  border-radius: 75px;\\n  margin: auto; }\\n\\n#image-upload-wrapper img#user-img {\\n    opacity: 0.7;\\n    width: 150px;\\n    height: 150px;\\n    border-radius: 75px;\\n    left: 0;\\n    right: 0;\\n    top: 0;\\n    bottom: 0;\\n    margin: auto; }\\n\\n#image-upload-wrapper img#edit-icon {\\n    position: absolute;\\n    width: 60%;\\n    right: 0;\\n    top: 0;\\n    left: 0;\\n    bottom: 0;\\n    margin: auto;\\n    opacity: 0.6; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yYWdoYXZlbmRyYXYvcHJvamVjdHMvRmtNb2JpbGUvc3JjL2FwcC9wYWdlcy9wcm9maWxlL3Byb2ZpbGUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksNEJBQTRCLEVBQUE7O0FBR2hDO0VBQ0ksa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLFlBQVksRUFBQTs7QUFMaEI7SUFPUSxZQUFZO0lBQ1osWUFBWTtJQUNaLGFBQWE7SUFDYixtQkFBbUI7SUFDbkIsT0FBTztJQUNQLFFBQVE7SUFDUixNQUFNO0lBQ04sU0FBUztJQUNULFlBQVksRUFBQTs7QUFmcEI7SUFrQlEsa0JBQWtCO0lBQ2xCLFVBQVU7SUFDVixRQUFRO0lBQ1IsTUFBTTtJQUNOLE9BQU87SUFDUCxTQUFTO0lBQ1QsWUFBWTtJQUNaLFlBQ0osRUFBQSIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3Byb2ZpbGUvcHJvZmlsZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24taXRlbSB7XG4gICAgcGFkZGluZy1sZWZ0OiAwcHggIWltcG9ydGFudDtcbn1cblxuI2ltYWdlLXVwbG9hZC13cmFwcGVyIHtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgd2lkdGg6IDE1MHB4O1xuICAgIGhlaWdodDogMTUwcHg7XG4gICAgYm9yZGVyLXJhZGl1czogNzVweDtcbiAgICBtYXJnaW46IGF1dG87XG4gICAgaW1nI3VzZXItaW1nIHtcbiAgICAgICAgb3BhY2l0eTogMC43O1xuICAgICAgICB3aWR0aDogMTUwcHg7XG4gICAgICAgIGhlaWdodDogMTUwcHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDc1cHg7XG4gICAgICAgIGxlZnQ6IDA7XG4gICAgICAgIHJpZ2h0OiAwO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIGJvdHRvbTogMDtcbiAgICAgICAgbWFyZ2luOiBhdXRvO1xuICAgIH1cbiAgICBpbWcjZWRpdC1pY29uIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB3aWR0aDogNjAlO1xuICAgICAgICByaWdodDogMDtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICBsZWZ0OiAwO1xuICAgICAgICBib3R0b206IDA7XG4gICAgICAgIG1hcmdpbjogYXV0bztcbiAgICAgICAgb3BhY2l0eTogMC42XG4gICAgfVxufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { ToastController, LoadingController } from '@ionic/angular';\nimport { AngularFireDatabase } from '@angular/fire/database';\nimport { AngularFireStorage } from '@angular/fire/storage';\n\nimport { Events } from '@ionic/angular';\nimport { Router } from '@angular/router';\nimport { GlobalService } from '../../api/global.service';\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.page.html',\n  styleUrls: ['./profile.page.scss'],\n})\nexport class ProfilePage implements OnInit {\n\n  profile : any = {};\n\n  imgPath: any;\n  filePath = 'images/' + window.localStorage.getItem(\"authID\") + '/';\n  uid: any;\n  profileLoader: any;\n\n  constructor(public toastr: ToastController, public loadingController: LoadingController, public afDataBase: AngularFireDatabase, public storage: AngularFireStorage, public events: Events,public router: Router, public globalComp: GlobalService) {\n    // this.profile = {\n    //   'uid':window.localStorage.getItem(\"authID\"),\n    //   'dob': '',\n    //   'email': '',\n    //   'fullname': '',\n    //   'gender': '',\n    //   'height':'',\n    //   'weight':'',\n    //   'client': '',\n    //   'username': '',\n    //   'description': '',\n    //   'fbTermAcceptance': '',\n    //   'disabled': ''\n    // }\n   }\n\n  ngOnInit() {\n    this.presentLoading('Loading data...');\n    // Call function to load the data from database\n   \n    this.uid = window.localStorage.getItem(\"authID\");\n    this.imgPath = this.globalComp.getUserImage();\n    this.profile = this.globalComp.getUserData();\n    setTimeout(() => {\n      this.dismissLoader();\n    },1000);\n  }\n\n  ionViewDidLoad(){\n  }\n\n  triggerUpload(){\n    document.getElementById('file-uploader').click();\n  }\n\n  uploadFile(event) {\n    this.presentLoading('Uploading Image...');\n\n    const file = event.target.files[0];\n    const fileRef = this.storage.ref(this.filePath);\n    this.storage.ref(this.filePath).put(file).then((data) => {\n      if(data.state == \"success\"){\n        this.imgPath = this.globalComp.getUserImage();\n        // loading data explicitly after the image loaded as we are not setting root page as tab.\n        // as we are setting the root page to TabsPage in the update profile function, it triggers the loadData function anyways \n        this.events.publish('loadData');\n        this.presentToast('Profile image updated');\n      } else {\n        this.presentToast('Problem uploading image. Please try after sometime.');\n      }\n      this.dismissLoader();\n    }).catch((err)=>{\n      this.presentToast('There was a problem uploading image. Try after sometime');\n    });\n  }\n\n  validateForm(form){\n    if(form.valid){\n      this.updateUserData();\n    } else {\n      this.presentToast('Please fill required fields');\n    }\n  }\n\n  updateUserData() {\n    this.presentLoading('Saving data...');\n    // handle undefined values for new registered users\n    let tempData = this.profile;\n\n    for (let key in tempData) {\n      if(tempData[key] == undefined){\n        this.profile[key] = \"\";\n      }\n    }\n    // console.log(\"user data posting\", this.profile);\n\n    this.afDataBase.database.ref(`profiles/`+this.uid).set(this.profile)\n    .then(() => {\n      this.presentToast('Profile Updated!');\n      this.globalComp.updateUserData();\n      this.dismissLoader();\n      this.router.navigateByUrl('/tabs');\n    }, function(error) {\n      this.dismissLoader();\n      this.presentToast('There was a problem updating profile. Try after sometime');\n    });\n  }\n\n  getAge(dateString) {\n    var today = new Date();\n    var birthDate = new Date(dateString);\n    var age = today.getFullYear() - birthDate.getFullYear();\n    var m = today.getMonth() - birthDate.getMonth();\n    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\n        age--;\n    }\n    return age;\n  }\n\n  async presentLoading(msg) {\n    this.profileLoader = await this.loadingController.create({\n      message: msg\n    });\n    await this.profileLoader.present();\n  }\n\n  async dismissLoader(){\n    await this.profileLoader.dismiss();\n  }\n\n  async presentToast(toastMsg) {\n    const toast = await this.toastr.create({\n      message: toastMsg,\n      duration: 3000\n    });\n    toast.present();\n  }\n}\n"],"sourceRoot":""}